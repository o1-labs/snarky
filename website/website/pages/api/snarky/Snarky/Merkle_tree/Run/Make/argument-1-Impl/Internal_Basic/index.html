<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Internal_Basic (snarky.Snarky.Merkle_tree.Run.Make.1-Impl.Internal_Basic)</title><link rel="stylesheet" href="../../../../../../../../../snarky/css/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../../../../../snarky/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../../../../index.html">snarky</a> &#x00BB; <a href="../../../../../index.html">Snarky</a> &#x00BB; <a href="../../../../index.html">Merkle_tree</a> &#x00BB; <a href="../../../index.html">Run</a> &#x00BB; <a href="../../index.html">Make</a> &#x00BB; <a href="../index.html">1-Impl</a> &#x00BB; Internal_Basic</nav><h1>Module <code>1-Impl.Internal_Basic</code></h1></header><dl><dt class="spec module" id="module-Proving_key"><a href="#module-Proving_key" class="anchor"></a><code><span class="keyword">module</span> <a href="Proving_key/index.html">Proving_key</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The <a href="../../../../../Backend_intf/module-type-S/Proving_key/index.html"><code>Backend_intf.S.Proving_key</code></a> module from the backend.</p></dd></dl><dl><dt class="spec module" id="module-Verification_key"><a href="#module-Verification_key" class="anchor"></a><code><span class="keyword">module</span> <a href="Verification_key/index.html">Verification_key</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The <a href="../../../../../Backend_intf/module-type-S/Verification_key/index.html"><code>Backend_intf.S.Verification_key</code></a> module from the backend.</p></dd></dl><dl><dt class="spec type" id="type-field"><a href="#type-field" class="anchor"></a><code><span class="keyword">type</span> field</code><code> = <a href="../index.html#type-field">field</a></code></dt><dd><p>The finite field over which the R1CS operates.</p></dd></dl><dl><dt class="spec module" id="module-R1CS_constraint_system"><a href="#module-R1CS_constraint_system" class="anchor"></a><code><span class="keyword">module</span> <a href="R1CS_constraint_system/index.html">R1CS_constraint_system</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The rank-1 constraint system used by this instance. See <a href="../../../../../Backend_intf/module-type-S/R1CS_constraint_system/index.html"><code>Backend_intf.S.R1CS_constraint_system</code></a>.</p></dd></dl><dl><dt class="spec module" id="module-Keypair"><a href="#module-Keypair" class="anchor"></a><code><span class="keyword">module</span> <a href="Keypair/index.html">Keypair</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Managing and generating pairs of keys <a href="Proving_key/index.html#type-t"><code>Proving_key.t</code></a> and <a href="Verification_key/index.html#type-t"><code>Verification_key.t</code></a>.</p></dd></dl><dl><dt class="spec module" id="module-Var"><a href="#module-Var" class="anchor"></a><code><span class="keyword">module</span> <a href="Var/index.html">Var</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Variables in the R1CS.</p></dd></dl><div class="spec module" id="module-Bigint"><a href="#module-Bigint" class="anchor"></a><code><span class="keyword">module</span> <a href="Bigint/index.html">Bigint</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec module" id="module-Constraint"><a href="#module-Constraint" class="anchor"></a><code><span class="keyword">module</span> <span class="keyword">rec</span> <a href="Constraint/index.html">Constraint</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Rank-1 constraints over <span class="xref-unresolved" title="unresolved reference to &quot;Var.t&quot;"><a href="index.html#module-Var"><code>Var</code></a>.t</span>s.</p></dd></dl><dl><dt class="spec module" id="module-Data_spec"><a href="#module-Data_spec" class="anchor"></a><code><span class="keyword">and</span> <a href="Data_spec/index.html">Data_spec</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The data specification for checked computations.</p></dd></dl><dl><dt class="spec module" id="module-Typ"><a href="#module-Typ" class="anchor"></a><code><span class="keyword">and</span> <a href="Typ/index.html">Typ</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Mappings from OCaml types to R1CS variables and constraints.</p></dd></dl><dl><dt class="spec module" id="module-Boolean"><a href="#module-Boolean" class="anchor"></a><code><span class="keyword">and</span> <a href="Boolean/index.html">Boolean</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Representation of booleans within a field.</p></dd></dl><dl><dt class="spec module" id="module-Checked"><a href="#module-Checked" class="anchor"></a><code><span class="keyword">and</span> <a href="Checked/index.html">Checked</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Checked computations.</p></dd></dl><div class="spec module" id="module-Field"><a href="#module-Field" class="anchor"></a><code><span class="keyword">and</span> <a href="Field/index.html">Field</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec module" id="module-As_prover"><a href="#module-As_prover" class="anchor"></a><code><span class="keyword">and</span> <a href="As_prover/index.html">As_prover</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span> <span class="keyword">with</span> <span class="keyword">type</span> 'a <a href="As_prover/Ref/index.html#type-t">Ref.t</a> = <span class="type-var">'a</span> <a href="../As_prover/Ref/index.html#type-t">As_prover.Ref.t</a></code></dt><dd><p>Code that can be run by the prover only, using 'superpowers' like looking at the contents of R1CS variables and creating new variables from other OCaml values.</p></dd></dl><div class="spec module" id="module-Let_syntax"><a href="#module-Let_syntax" class="anchor"></a><code><span class="keyword">module</span> <a href="Let_syntax/index.html">Let_syntax</a> : <a href="../../../../../Monad_let/index.html#module-type-Syntax2">Monad_let.Syntax2</a> <span class="keyword">with</span> <span class="keyword">type</span> ('a, 's) <a href="../../../../../Monad_let/module-type-Syntax2/index.html#type-t">t</a> := (<span class="type-var">'a</span>, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a></code></div><dl><dt class="spec module" id="module-Proof"><a href="#module-Proof" class="anchor"></a><code><span class="keyword">module</span> <a href="Proof/index.html">Proof</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Zero-knowledge proofs generated from checked computations.</p></dd></dl><dl><dt class="spec module" id="module-Bitstring_checked"><a href="#module-Bitstring_checked" class="anchor"></a><code><span class="keyword">module</span> <a href="Bitstring_checked/index.html">Bitstring_checked</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Utility functions for dealing with lists of bits in the R1CS.</p></dd></dl><dl><dt class="spec module" id="module-Handle"><a href="#module-Handle" class="anchor"></a><code><span class="keyword">module</span> <a href="Handle/index.html">Handle</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Representation of an R1CS value and an OCaml value (if running as the prover) together.</p></dd></dl><dl><dt class="spec module" id="module-Runner"><a href="#module-Runner" class="anchor"></a><code><span class="keyword">module</span> <a href="Runner/index.html">Runner</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Utility functions for calling single checked computations.</p></dd></dl><dl><dt class="spec type" id="type-response"><a href="#type-response" class="anchor"></a><code><span class="keyword">type</span> response</code><code> = <a href="../../../../../Request/index.html#type-response">Request.response</a></code></dt></dl><dl><dt class="spec value" id="val-unhandled"><a href="#val-unhandled" class="anchor"></a><code><span class="keyword">val</span> unhandled : <a href="index.html#type-response">response</a></code></dt></dl><dl><dt class="spec type" id="type-request"><a href="#type-request" class="anchor"></a><code><span class="keyword">type</span> request</code><code> = <a href="../../../../../Request/index.html#type-request">Request.request</a></code><code> = </code><table class="variant"><tr id="type-request.With" class="anchored"><td class="def constructor"><a href="#type-request.With" class="anchor"></a><code>| </code><code><span class="constructor">With</span> : </code><code>{</code><table class="record"><tr id="type-request.request" class="anchored"><td class="def field"><a href="#type-request.request" class="anchor"></a><code>request : <span class="type-var">'a</span> <a href="../../../../../Request/index.html#type-t">Request.t</a>;</code></td></tr><tr id="type-request.respond" class="anchored"><td class="def field"><a href="#type-request.respond" class="anchor"></a><code>respond : <span class="type-var">'a</span> <a href="../../../../../Request/Response/index.html#type-t">Request.Response.t</a> <span>&#45;&gt;</span> <a href="index.html#type-response">response</a>;</code></td></tr></table><code>}</code><code> <span>&#45;&gt;</span> <a href="index.html#type-request">request</a></code></td></tr></table></dt><dd><p>The argument type for request handlers.</p><pre><code class="ml">type _ Request.t += My_request : 'a list -&gt; 'a Request.t

let handled (c : ('a, _) Checked.t) : ('a, _) Checked.t =
  handle (fun (With {request; respond}) -&gt;
    match request with
    | My_request l -&gt;
      let x = (* Do something with l to create a single value. *) in
      respond (Provide x)
    | _ -&gt; unhandled )</code></pre></dd></dl><dl><dt class="spec module" id="module-Handler"><a href="#module-Handler" class="anchor"></a><code><span class="keyword">module</span> <a href="Handler/index.html">Handler</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The type of handlers.</p></dd></dl><dl><dt class="spec module" id="module-Proof_system"><a href="#module-Proof_system" class="anchor"></a><code><span class="keyword">module</span> <a href="Proof_system/index.html">Proof_system</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>The interface for managing proof systems.</p></dd></dl><dl><dt class="spec module" id="module-Perform"><a href="#module-Perform" class="anchor"></a><code><span class="keyword">module</span> <a href="Perform/index.html">Perform</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Utility functions for running different representations of checked computations using a standard interface.</p></dd></dl><dl><dt class="spec value" id="val-assert_"><a href="#val-assert_" class="anchor"></a><code><span class="keyword">val</span> assert_ : ?&#8288;label:string <span>&#45;&gt;</span> <a href="Constraint/index.html#type-t">Constraint.t</a> <span>&#45;&gt;</span> (unit, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a></code></dt><dd><p>Add a constraint to the constraint system, optionally with the label given by <code>label</code>.</p></dd></dl><dl><dt class="spec value" id="val-assert_all"><a href="#val-assert_all" class="anchor"></a><code><span class="keyword">val</span> assert_all : ?&#8288;label:string <span>&#45;&gt;</span> <a href="Constraint/index.html#type-t">Constraint.t</a> list <span>&#45;&gt;</span> (unit, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a></code></dt><dd><p>Add all of the constraints in the list to the constraint system, optionally with the label given by <code>label</code>.</p></dd></dl><dl><dt class="spec value" id="val-assert_r1cs"><a href="#val-assert_r1cs" class="anchor"></a><code><span class="keyword">val</span> assert_r1cs : ?&#8288;label:string <span>&#45;&gt;</span> <a href="Field/Var/index.html#type-t">Field.Var.t</a> <span>&#45;&gt;</span> <a href="Field/Var/index.html#type-t">Field.Var.t</a> <span>&#45;&gt;</span> <a href="Field/Var/index.html#type-t">Field.Var.t</a> <span>&#45;&gt;</span> (unit, <span class="type-var">_</span>) <a href="Checked/index.html#type-t">Checked.t</a></code></dt><dd><p>Add a rank-1 constraint to the constraint system, optionally with the label given by <code>label</code>.</p><p>See <a href="Constraint/index.html#val-r1cs"><code>Constraint.r1cs</code></a> for more information on rank-1 constraints.</p></dd></dl><dl><dt class="spec value" id="val-assert_square"><a href="#val-assert_square" class="anchor"></a><code><span class="keyword">val</span> assert_square : ?&#8288;label:string <span>&#45;&gt;</span> <a href="Field/Var/index.html#type-t">Field.Var.t</a> <span>&#45;&gt;</span> <a href="Field/Var/index.html#type-t">Field.Var.t</a> <span>&#45;&gt;</span> (unit, <span class="type-var">_</span>) <a href="Checked/index.html#type-t">Checked.t</a></code></dt><dd><p>Add a 'square' constraint to the constraint system, optionally with the label given by <code>label</code>.</p><p>See <a href="Constraint/index.html#val-square"><code>Constraint.square</code></a> for more information.</p></dd></dl><dl><dt class="spec value" id="val-as_prover"><a href="#val-as_prover" class="anchor"></a><code><span class="keyword">val</span> as_prover : (unit, <span class="type-var">'s</span>) <a href="As_prover/index.html#type-t">As_prover.t</a> <span>&#45;&gt;</span> (unit, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a></code></dt><dd><p>Run an <a href="As_prover/index.html"><code>As_prover</code></a> block.</p></dd></dl><dl><dt class="spec value" id="val-with_state"><a href="#val-with_state" class="anchor"></a><code><span class="keyword">val</span> with_state : ?&#8288;and_then:(<span class="type-var">'s1</span> <span>&#45;&gt;</span> (unit, <span class="type-var">'s</span>) <a href="As_prover/index.html#type-t">As_prover.t</a>) <span>&#45;&gt;</span> (<span class="type-var">'s1</span>, <span class="type-var">'s</span>) <a href="As_prover/index.html#type-t">As_prover.t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'s1</span>) <a href="Checked/index.html#type-t">Checked.t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a></code></dt><dd><p>Update the prover state by running an <a href="As_prover/index.html"><code>As_prover</code></a> block.</p></dd></dl><dl><dt class="spec value" id="val-next_auxiliary"><a href="#val-next_auxiliary" class="anchor"></a><code><span class="keyword">val</span> next_auxiliary : (int, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a></code></dt><dd><p>Internal: read the value of the next unused auxiliary input index.</p></dd></dl><dl><dt class="spec value" id="val-request_witness"><a href="#val-request_witness" class="anchor"></a><code><span class="keyword">val</span> request_witness : (<span class="type-var">'var</span>, <span class="type-var">'value</span>) <a href="Typ/index.html#type-t">Typ.t</a> <span>&#45;&gt;</span> (<span class="type-var">'value</span> <a href="../../../../../Request/index.html#type-t">Request.t</a>, <span class="type-var">'s</span>) <a href="As_prover/index.html#type-t">As_prover.t</a> <span>&#45;&gt;</span> (<span class="type-var">'var</span>, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a></code></dt><dd><p><code>request_witness typ create_request</code> runs the <code>create_request</code> <a href="As_prover/index.html#type-t"><code>As_prover.t</code></a> block to generate a <a href="../../../../../Request/index.html#type-t"><code>Request.t</code></a>.</p><p>This allows us to introduce values into the R1CS without passing them as public inputs.</p><p>If no handler for the request is attached by <a href="index.html#val-handle"><code>handle</code></a>, this raises a <code>Failure</code>.</p></dd></dl><dl><dt class="spec value" id="val-perform"><a href="#val-perform" class="anchor"></a><code><span class="keyword">val</span> perform : (unit <a href="../../../../../Request/index.html#type-t">Request.t</a>, <span class="type-var">'s</span>) <a href="As_prover/index.html#type-t">As_prover.t</a> <span>&#45;&gt;</span> (unit, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a></code></dt><dd><p>Like <a href="index.html#val-request_witness"><code>request_witness</code></a>, but the request doesn't return any usable value.</p></dd></dl><dl><dt class="spec value" id="val-request"><a href="#val-request" class="anchor"></a><code><span class="keyword">val</span> request : ?&#8288;such_that:(<span class="type-var">'var</span> <span>&#45;&gt;</span> (unit, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a>) <span>&#45;&gt;</span> (<span class="type-var">'var</span>, <span class="type-var">'value</span>) <a href="Typ/index.html#type-t">Typ.t</a> <span>&#45;&gt;</span> <span class="type-var">'value</span> <a href="../../../../../Request/index.html#type-t">Request.t</a> <span>&#45;&gt;</span> (<span class="type-var">'var</span>, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a></code></dt><dd><p>Like <a href="index.html#val-request_witness"><code>request_witness</code></a>, but generates the request without using any <a href="As_prover/index.html"><code>As_prover</code></a> 'superpowers'.</p><p>The argument <code>such_that</code> allows adding extra constraints on the returned value.</p><p>(* TODO: Come up with a better name for this in relation to the above *)</p></dd></dl><dl><dt class="spec value" id="val-exists"><a href="#val-exists" class="anchor"></a><code><span class="keyword">val</span> exists : ?&#8288;request:(<span class="type-var">'value</span> <a href="../../../../../Request/index.html#type-t">Request.t</a>, <span class="type-var">'s</span>) <a href="As_prover/index.html#type-t">As_prover.t</a> <span>&#45;&gt;</span> ?&#8288;compute:(<span class="type-var">'value</span>, <span class="type-var">'s</span>) <a href="As_prover/index.html#type-t">As_prover.t</a> <span>&#45;&gt;</span> (<span class="type-var">'var</span>, <span class="type-var">'value</span>) <a href="Typ/index.html#type-t">Typ.t</a> <span>&#45;&gt;</span> (<span class="type-var">'var</span>, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a></code></dt><dd><p>Introduce a value into the R1CS.</p><ul><li>The <code>request</code> argument functions like <a href="index.html#val-request_witness"><code>request_witness</code></a>, creating a request and returning the result.</li><li>If no <code>request</code> argument is given, or if the <code>request</code> isn't handled, then <code>compute</code> is run to create a value.</li></ul><p>If <code>compute</code> is not given and <code>request</code> fails/is also not given, then this function raises a <code>Failure</code>.</p></dd></dl><dl><dt class="spec value" id="val-exists_handle"><a href="#val-exists_handle" class="anchor"></a><code><span class="keyword">val</span> exists_handle : ?&#8288;request:(<span class="type-var">'value</span> <a href="../../../../../Request/index.html#type-t">Request.t</a>, <span class="type-var">'s</span>) <a href="As_prover/index.html#type-t">As_prover.t</a> <span>&#45;&gt;</span> ?&#8288;compute:(<span class="type-var">'value</span>, <span class="type-var">'s</span>) <a href="As_prover/index.html#type-t">As_prover.t</a> <span>&#45;&gt;</span> (<span class="type-var">'var</span>, <span class="type-var">'value</span>) <a href="Typ/index.html#type-t">Typ.t</a> <span>&#45;&gt;</span> ((<span class="type-var">'var</span>, <span class="type-var">'value</span>) <a href="Handle/index.html#type-t">Handle.t</a>, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a></code></dt><dd><p>Like <a href="index.html#val-exists"><code>exists</code></a>, but returns a <a href="Handle/index.html#type-t"><code>Handle.t</code></a>.</p><p>This persists the OCaml value of the result, which is stored unchanged in the <a href="Handle/index.html#type-t"><code>Handle.t</code></a> and can be recalled in later <a href="As_prover/index.html"><code>As_prover</code></a> blocks using <a href="Handle/index.html#val-value"><code>Handle.value</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-handle"><a href="#val-handle" class="anchor"></a><code><span class="keyword">val</span> handle : (<span class="type-var">'a</span>, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a> <span>&#45;&gt;</span> <a href="Handler/index.html#type-t">Handler.t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a></code></dt><dd><p>Add a request handler to the checked computation, to be used by <a href="index.html#val-request_witness"><code>request_witness</code></a>, <a href="index.html#val-perform"><code>perform</code></a>, <a href="index.html#val-request"><code>request</code></a> or <a href="index.html#val-exists"><code>exists</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-handle_as_prover"><a href="#val-handle_as_prover" class="anchor"></a><code><span class="keyword">val</span> handle_as_prover : (<span class="type-var">'a</span>, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a> <span>&#45;&gt;</span> (<a href="Handler/index.html#type-t">Handler.t</a>, <span class="type-var">'s</span>) <a href="As_prover/index.html#type-t">As_prover.t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a></code></dt><dd><p>Generate a handler using the <a href="As_prover/index.html"><code>As_prover</code></a> 'superpowers', and use it for <a href="index.html#val-request_witness"><code>request_witness</code></a>, <a href="index.html#val-perform"><code>perform</code></a>, <a href="index.html#val-request"><code>request</code></a> or <a href="index.html#val-exists"><code>exists</code></a> calls in the wrapped checked computation.</p></dd></dl><dl><dt class="spec value" id="val-with_label"><a href="#val-with_label" class="anchor"></a><code><span class="keyword">val</span> with_label : string <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a></code></dt><dd><p>Add a label to all of the constraints added in the checked computation. If a constraint is checked and isn't satisfied, this label will be shown in the error message.</p></dd></dl><dl><dt class="spec value" id="val-constraint_system"><a href="#val-constraint_system" class="anchor"></a><code><span class="keyword">val</span> constraint_system : exposing:((unit, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a>, <span class="type-var">_</span>, <span class="type-var">'k_var</span>, <span class="type-var">_</span>) <a href="Data_spec/index.html#type-t">Data_spec.t</a> <span>&#45;&gt;</span> <span class="type-var">'k_var</span> <span>&#45;&gt;</span> <a href="R1CS_constraint_system/index.html#type-t">R1CS_constraint_system.t</a></code></dt><dd><p>Generate the R1CS for the checked computation.</p></dd></dl><dl><dt class="spec value" id="val-with_lens"><a href="#val-with_lens" class="anchor"></a><code><span class="keyword">val</span> with_lens : (<span class="type-var">'whole</span>, <span class="type-var">'lens</span>) <a href="../../../../../Lens/index.html#type-t">Lens.t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'lens</span>) <a href="Checked/index.html#type-t">Checked.t</a> <span>&#45;&gt;</span> (<span class="type-var">'a</span>, <span class="type-var">'whole</span>) <a href="Checked/index.html#type-t">Checked.t</a></code></dt><dd><p><code>with_lens lens t</code> uses the <a href="../../../../../Lens/index.html#type-t"><code>Lens.t</code></a> provided to lift the prover state of <code>as_prover</code> to <code>'whole</code> from a sub-type <code>'lens</code>.</p></dd></dl><dl><dt class="spec value" id="val-generate_keypair"><a href="#val-generate_keypair" class="anchor"></a><code><span class="keyword">val</span> generate_keypair : exposing:((unit, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a>, <span class="type-var">_</span>, <span class="type-var">'k_var</span>, <span class="type-var">_</span>) <a href="Data_spec/index.html#type-t">Data_spec.t</a> <span>&#45;&gt;</span> <span class="type-var">'k_var</span> <span>&#45;&gt;</span> <a href="Keypair/index.html#type-t">Keypair.t</a></code></dt><dd><p>Create a new keypair for the R1CS generated by the checked computation.</p></dd></dl><dl><dt class="spec value" id="val-conv"><a href="#val-conv" class="anchor"></a><code><span class="keyword">val</span> conv : (<span class="type-var">'r_var</span> <span>&#45;&gt;</span> <span class="type-var">'r_value</span>) <span>&#45;&gt;</span> (<span class="type-var">'r_var</span>, <span class="type-var">'r_value</span>, <span class="type-var">'k_var</span>, <span class="type-var">'k_value</span>) <a href="Data_spec/index.html#type-t">Data_spec.t</a> <span>&#45;&gt;</span> <span class="type-var">'k_var</span> <span>&#45;&gt;</span> <span class="type-var">'k_value</span></code></dt><dd><p>Internal: supplies arguments to a checked computation by storing them according to the <a href="Data_spec/index.html#type-t"><code>Data_spec.t</code></a> and passing the R1CS versions.</p></dd></dl><dl><dt class="spec value" id="val-prove"><a href="#val-prove" class="anchor"></a><code><span class="keyword">val</span> prove : ?&#8288;message:<a href="Proof/index.html#type-message">Proof.message</a> <span>&#45;&gt;</span> <a href="Proving_key/index.html#type-t">Proving_key.t</a> <span>&#45;&gt;</span> ((unit, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a>, <a href="Proof/index.html#type-t">Proof.t</a>, <span class="type-var">'k_var</span>, <span class="type-var">'k_value</span>) <a href="Data_spec/index.html#type-t">Data_spec.t</a> <span>&#45;&gt;</span> <span class="type-var">'s</span> <span>&#45;&gt;</span> <span class="type-var">'k_var</span> <span>&#45;&gt;</span> <span class="type-var">'k_value</span></code></dt><dd><p>Run the checked computation, creating a proof that it has been run correctly (ie. satisfies its constraints).</p></dd></dl><dl><dt class="spec value" id="val-verify"><a href="#val-verify" class="anchor"></a><code><span class="keyword">val</span> verify : ?&#8288;message:<a href="Proof/index.html#type-message">Proof.message</a> <span>&#45;&gt;</span> <a href="Proof/index.html#type-t">Proof.t</a> <span>&#45;&gt;</span> <a href="Verification_key/index.html#type-t">Verification_key.t</a> <span>&#45;&gt;</span> (<span class="type-var">_</span>, bool, <span class="type-var">_</span>, <span class="type-var">'k_value</span>) <a href="Data_spec/index.html#type-t">Data_spec.t</a> <span>&#45;&gt;</span> <span class="type-var">'k_value</span></code></dt><dd><p>Verify a <a href="Proof/index.html#type-t"><code>Proof.t</code></a> generated from a checked computation.</p></dd></dl><dl><dt class="spec value" id="val-run_unchecked"><a href="#val-run_unchecked" class="anchor"></a><code><span class="keyword">val</span> run_unchecked : (<span class="type-var">'a</span>, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a> <span>&#45;&gt;</span> <span class="type-var">'s</span> <span>&#45;&gt;</span> <span class="type-var">'s</span> * <span class="type-var">'a</span></code></dt><dd><p>Run a checked computation as the prover, without checking the constraints.</p></dd></dl><dl><dt class="spec value" id="val-run_and_check"><a href="#val-run_and_check" class="anchor"></a><code><span class="keyword">val</span> run_and_check : ((<span class="type-var">'a</span>, <span class="type-var">'s</span>) <a href="As_prover/index.html#type-t">As_prover.t</a>, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a> <span>&#45;&gt;</span> <span class="type-var">'s</span> <span>&#45;&gt;</span> (<span class="type-var">'s</span> * <span class="type-var">'a</span>) Core_kernel.Or_error.t</code></dt><dd><p>Run a checked computation as the prover, checking the constraints.</p></dd></dl><dl><dt class="spec value" id="val-check"><a href="#val-check" class="anchor"></a><code><span class="keyword">val</span> check : (<span class="type-var">'a</span>, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a> <span>&#45;&gt;</span> <span class="type-var">'s</span> <span>&#45;&gt;</span> unit Core_kernel.Or_error.t</code></dt><dd><p>Run a checked computation as the prover, returning <code>true</code> if the constraints are all satisfied, or <code>false</code> otherwise.</p></dd></dl><dl><dt class="spec value" id="val-generate_auxiliary_input"><a href="#val-generate_auxiliary_input" class="anchor"></a><code><span class="keyword">val</span> generate_auxiliary_input : ((<span class="type-var">'a</span>, <span class="type-var">'s</span>) <a href="Checked/index.html#type-t">Checked.t</a>, unit, <span class="type-var">'k_var</span>, <span class="type-var">'k_value</span>) <a href="Data_spec/index.html#type-t">Data_spec.t</a> <span>&#45;&gt;</span> <span class="type-var">'s</span> <span>&#45;&gt;</span> <span class="type-var">'k_var</span> <span>&#45;&gt;</span> <span class="type-var">'k_value</span></code></dt><dd><p>Run the checked computation and generate the auxiliary input, but don't generate a proof.</p><p>Returns <code>unit</code>; this is for testing only.</p></dd></dl><dl><dt class="spec value" id="val-constraint_count"><a href="#val-constraint_count" class="anchor"></a><code><span class="keyword">val</span> constraint_count : ?&#8288;log:(?&#8288;start:bool <span>&#45;&gt;</span> string <span>&#45;&gt;</span> int <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> (<span class="type-var">_</span>, <span class="type-var">_</span>) <a href="Checked/index.html#type-t">Checked.t</a> <span>&#45;&gt;</span> int</code></dt><dd><p>Returns the number of constraints in the constraint system.</p><p>The optional <code>log</code> argument is called at the start and end of each <code>with_label</code>, with the arguments <code>log ?start label count</code>, where:</p><ul><li><code>start</code> is <code>Some true</code> if it the start of the <code>with_label</code>, or <code>None</code> otherwise</li><li><code>label</code> is the label added by <code>with_label</code></li><li><code>count</code> is the number of constraints at that point.</li></ul></dd></dl><div class="spec module" id="module-Test"><a href="#module-Test" class="anchor"></a><code><span class="keyword">module</span> <a href="Test/index.html">Test</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-set_constraint_logger"><a href="#val-set_constraint_logger" class="anchor"></a><code><span class="keyword">val</span> set_constraint_logger : (<a href="Constraint/index.html#type-t">Constraint.t</a> <span>&#45;&gt;</span> unit) <span>&#45;&gt;</span> unit</code></dt><dt class="spec value" id="val-clear_constraint_logger"><a href="#val-clear_constraint_logger" class="anchor"></a><code><span class="keyword">val</span> clear_constraint_logger : unit <span>&#45;&gt;</span> unit</code></dt></dl></div></body></html>