<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Typ (snarky.Snarky.Knapsack.Make.1-M.Typ)</title><link rel="stylesheet" href="../../../../../../../../snarky/css/odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../../../../snarky/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../../../../index.html">snarky</a> &#x00BB; <a href="../../../../index.html">Snarky</a> &#x00BB; <a href="../../../index.html">Knapsack</a> &#x00BB; <a href="../../index.html">Make</a> &#x00BB; <a href="../index.html">1-M</a> &#x00BB; Typ</nav><h1>Module <code>1-M.Typ</code></h1><p>Mappings from OCaml types to R1CS variables and constraints.</p></header><div class="spec module" id="module-Store"><a href="#module-Store" class="anchor"></a><code><span class="keyword">module </span><a href="Store/index.html">Store</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Alloc"><a href="#module-Alloc" class="anchor"></a><code><span class="keyword">module </span><a href="Alloc/index.html">Alloc</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Read"><a href="#module-Read" class="anchor"></a><code><span class="keyword">module </span><a href="Read/index.html">Read</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type </span>('var, 'value) t</code><code><span class="keyword"> = </span>(<span class="type-var">'var</span>, <span class="type-var">'value</span>, <a href="../Field/index.html#type-t">Field.t</a>, (unit, unit) <a href="../Checked/index.html#type-t">Checked.t</a>) <a href="../../../../Types/Typ/index.html#type-t">Types.Typ.t</a></code></dt><dd><p>The type <code>('var, 'value) t</code> describes a mapping from the OCaml type <code>'value</code> to a type representing the value using R1CS variables (<code>'var</code>). This description includes</p><ul><li>a <a href="Store/index.html#type-t"><code>Store.t</code></a> for storing <code>'value</code>s as <code>'var</code>s</li><li>a <a href="Alloc/index.html#type-t"><code>Alloc.t</code></a> for creating a <code>'var</code> when we don't know what values it should contain yet</li><li>a <a href="Read/index.html#type-t"><code>Read.t</code></a> for reading the contents of the <code>'var</code> back out as a <code>'value</code> in <a href="../As_prover/index.html"><code>As_prover</code></a> blocks</li><li>a <a href="../Checked/index.html#type-t"><code>Checked.t</code></a> for asserting constraints on the <code>'var</code> -- for example, that a <code>Boolean.t</code> is either a <a href="../Field/index.html#val-zero"><code>Field.zero</code></a> or a <a href="../Field/index.html#val-one"><code>Field.one</code></a>.</li></ul></dd></dl><aside><p>Accessors for <a href="../../../../Types/Typ/index.html#type-t"><code>Types.Typ.t</code></a> fields:</p></aside><dl><dt class="spec value" id="val-store"><a href="#val-store" class="anchor"></a><code><span class="keyword">val </span>store : (<span class="type-var">'var</span>, <span class="type-var">'value</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'value</span> <span>&#45;&gt;</span> <span class="type-var">'var</span> <a href="Store/index.html#type-t">Store.t</a></code></dt><dd><p><code>store typ x</code> stores <code>x</code> as a <code>'var</code> according to the description given by <code>typ</code>.</p></dd></dl><dl><dt class="spec value" id="val-read"><a href="#val-read" class="anchor"></a><code><span class="keyword">val </span>read : (<span class="type-var">'var</span>, <span class="type-var">'value</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'var</span> <span>&#45;&gt;</span> <span class="type-var">'value</span> <a href="Read/index.html#type-t">Read.t</a></code></dt><dd><p><code>read typ x</code> reads <code>x</code> as a <code>'value</code> according to the description given by <code>typ</code>.</p></dd></dl><dl><dt class="spec value" id="val-alloc"><a href="#val-alloc" class="anchor"></a><code><span class="keyword">val </span>alloc : (<span class="type-var">'var</span>, <span class="type-var">'value</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'var</span> <a href="Alloc/index.html#type-t">Alloc.t</a></code></dt><dd><p><code>alloc typ</code> allocates the R1CS variables necessary to represent a <code>'value</code> and creates a <code>'var</code> from them, according to the description given by <code>typ</code>.</p></dd></dl><dl><dt class="spec value" id="val-check"><a href="#val-check" class="anchor"></a><code><span class="keyword">val </span>check : (<span class="type-var">'var</span>, <span class="type-var">'value</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span class="type-var">'var</span> <span>&#45;&gt;</span> (unit, <span class="type-var">_</span>) <a href="../Checked/index.html#type-t">Checked.t</a></code></dt><dd><p><code>check typ x</code> runs a checked computation to generate the constraints described by <code>typ</code> that <code>x</code> should satisfy.</p></dd></dl><aside><p>Basic instances:</p></aside><dl><dt class="spec value" id="val-unit"><a href="#val-unit" class="anchor"></a><code><span class="keyword">val </span>unit : (unit, unit) <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-field"><a href="#val-field" class="anchor"></a><code><span class="keyword">val </span>field : (<a href="../Field/Var/index.html#type-t">Field.Var.t</a>, <a href="../index.html#type-field">field</a>) <a href="index.html#type-t">t</a></code></dt></dl><aside><p>Common constructors:</p></aside><dl><dt class="spec value" id="val-tuple2"><a href="#val-tuple2" class="anchor"></a><code><span class="keyword">val </span>tuple2 : (<span class="type-var">'var1</span>, <span class="type-var">'value1</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'var2</span>, <span class="type-var">'value2</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'var1</span><span class="keyword"> * </span><span class="type-var">'var2</span>, <span class="type-var">'value1</span><span class="keyword"> * </span><span class="type-var">'value2</span>) <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-(*)"><a href="#val-(*)" class="anchor"></a><code><span class="keyword">val </span>(*) : (<span class="type-var">'var1</span>, <span class="type-var">'value1</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'var2</span>, <span class="type-var">'value2</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'var1</span><span class="keyword"> * </span><span class="type-var">'var2</span>, <span class="type-var">'value1</span><span class="keyword"> * </span><span class="type-var">'value2</span>) <a href="index.html#type-t">t</a></code></dt><dd><p>synonym for <a href="index.html#val-tuple2"><code>tuple2</code></a></p></dd></dl><dl><dt class="spec value" id="val-tuple3"><a href="#val-tuple3" class="anchor"></a><code><span class="keyword">val </span>tuple3 : (<span class="type-var">'var1</span>, <span class="type-var">'value1</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'var2</span>, <span class="type-var">'value2</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'var3</span>, <span class="type-var">'value3</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'var1</span><span class="keyword"> * </span><span class="type-var">'var2</span><span class="keyword"> * </span><span class="type-var">'var3</span>, <span class="type-var">'value1</span><span class="keyword"> * </span><span class="type-var">'value2</span><span class="keyword"> * </span><span class="type-var">'value3</span>) <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-list"><a href="#val-list" class="anchor"></a><code><span class="keyword">val </span>list : length:int <span>&#45;&gt;</span> (<span class="type-var">'var</span>, <span class="type-var">'value</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'var</span> list, <span class="type-var">'value</span> list) <a href="index.html#type-t">t</a></code></dt><dd><p><code>list ~length typ</code> describes how to convert between a <code>'value list</code> and a <code>'var list</code>, given a description of how to convert between a <code>'value</code> and a <code>'var</code>.</p><p><code>length</code> must be the length of the lists that are converted. This value must be constant for every use; otherwise the constraint system may use a different number of variables depending on the data given.</p><p>Passing a list of the wrong length throws an error.</p></dd></dl><dl><dt class="spec value" id="val-array"><a href="#val-array" class="anchor"></a><code><span class="keyword">val </span>array : length:int <span>&#45;&gt;</span> (<span class="type-var">'var</span>, <span class="type-var">'value</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> (<span class="type-var">'var</span> array, <span class="type-var">'value</span> array) <a href="index.html#type-t">t</a></code></dt><dd><p><code>array ~length typ</code> describes how to convert between a <code>'value array</code> and a <code>'var array</code>, given a description of how to convert between a <code>'value</code> and a <code>'var</code>.</p><p><code>length</code> must be the length of the arrays that are converted. This value must be constant for every use; otherwise the constraint system may use a different number of variables depending on the data given.</p><p>Passing an array of the wrong length throws an error.</p></dd></dl><dl><dt class="spec value" id="val-hlist"><a href="#val-hlist" class="anchor"></a><code><span class="keyword">val </span>hlist : (unit, unit, <span class="type-var">'k_var</span>, <span class="type-var">'k_value</span>) <a href="../Data_spec/index.html#type-t">Data_spec.t</a> <span>&#45;&gt;</span> ((unit, <span class="type-var">'k_var</span>) <a href="../../../../H_list/index.html#type-t">H_list.t</a>, (unit, <span class="type-var">'k_value</span>) <a href="../../../../H_list/index.html#type-t">H_list.t</a>) <a href="index.html#type-t">t</a></code></dt><dd><p>Unpack a <a href="../Data_spec/index.html#type-t"><code>Data_spec.t</code></a> list to a <a href="index.html#type-t"><code>t</code></a>. The return value relates a polymorphic list of OCaml types to a polymorphic list of R1CS types.</p></dd></dl><aside><p>Convert relationships over <a href="https://en.wikipedia.org/wiki/Isomorphism">isomorphic</a> types:</p></aside><dl><dt class="spec value" id="val-transport"><a href="#val-transport" class="anchor"></a><code><span class="keyword">val </span>transport : (<span class="type-var">'var</span>, <span class="type-var">'value1</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> there:(<span class="type-var">'value2</span> <span>&#45;&gt;</span> <span class="type-var">'value1</span>) <span>&#45;&gt;</span> back:(<span class="type-var">'value1</span> <span>&#45;&gt;</span> <span class="type-var">'value2</span>) <span>&#45;&gt;</span> (<span class="type-var">'var</span>, <span class="type-var">'value2</span>) <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-transport_var"><a href="#val-transport_var" class="anchor"></a><code><span class="keyword">val </span>transport_var : (<span class="type-var">'var1</span>, <span class="type-var">'value</span>) <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> there:(<span class="type-var">'var2</span> <span>&#45;&gt;</span> <span class="type-var">'var1</span>) <span>&#45;&gt;</span> back:(<span class="type-var">'var1</span> <span>&#45;&gt;</span> <span class="type-var">'var2</span>) <span>&#45;&gt;</span> (<span class="type-var">'var2</span>, <span class="type-var">'value</span>) <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-of_hlistable"><a href="#val-of_hlistable" class="anchor"></a><code><span class="keyword">val </span>of_hlistable : (unit, unit, <span class="type-var">'k_var</span>, <span class="type-var">'k_value</span>) <a href="../Data_spec/index.html#type-t">Data_spec.t</a> <span>&#45;&gt;</span> var_to_hlist:(<span class="type-var">'var</span> <span>&#45;&gt;</span> (unit, <span class="type-var">'k_var</span>) <a href="../../../../H_list/index.html#type-t">H_list.t</a>) <span>&#45;&gt;</span> var_of_hlist:((unit, <span class="type-var">'k_var</span>) <a href="../../../../H_list/index.html#type-t">H_list.t</a> <span>&#45;&gt;</span> <span class="type-var">'var</span>) <span>&#45;&gt;</span> value_to_hlist:(<span class="type-var">'value</span> <span>&#45;&gt;</span> (unit, <span class="type-var">'k_value</span>) <a href="../../../../H_list/index.html#type-t">H_list.t</a>) <span>&#45;&gt;</span> value_of_hlist:((unit, <span class="type-var">'k_value</span>) <a href="../../../../H_list/index.html#type-t">H_list.t</a> <span>&#45;&gt;</span> <span class="type-var">'value</span>) <span>&#45;&gt;</span> (<span class="type-var">'var</span>, <span class="type-var">'value</span>) <a href="index.html#type-t">t</a></code></dt><dd><p>A specialised version of <a href="index.html#val-transport"><code>transport</code></a>/<a href="index.html#val-transport_var"><code>transport_var</code></a> that describes the relationship between <code>'var</code> and <code>'value</code> in terms of a <a href="../Data_spec/index.html#type-t"><code>Data_spec.t</code></a>.</p></dd></dl><div class="spec module" id="module-Of_traversable"><a href="#module-Of_traversable" class="anchor"></a><code><span class="keyword">module </span><a href="Of_traversable/index.html">Of_traversable</a> : <span class="keyword">functor</span> (<a href="Of_traversable/argument-1-T/index.html">T</a> : <a href="../../../../Traversable/index.html#module-type-S">Traversable.S</a>) <span>&#45;&gt;</span> <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div><div class="spec include"><div class="doc"><details open="open"><summary><span class="def"><code><span class="keyword">include </span><span class="keyword">module type of </span><a href="../../../../Types/Typ/index.html#module-T">Types.Typ.T</a></code></span></summary><dl><dt class="spec type" id="type-typ"><a href="#type-typ" class="anchor"></a><code><span class="keyword">type </span>('var, 'value, 'field, 'checked) typ</code><code><span class="keyword"> = </span></code><code>{</code><table class="record"><tr id="type-typ.store" class="anchored"><td class="def field"><a href="#type-typ.store" class="anchor"></a><code>store : <span class="type-var">'value</span> <span>&#45;&gt;</span> (<span class="type-var">'var</span>, <span class="type-var">'field</span>) <a href="../../../../Typ_monads/Store/index.html#type-t">Typ_monads.Store.t</a>;</code></td></tr><tr id="type-typ.read" class="anchored"><td class="def field"><a href="#type-typ.read" class="anchor"></a><code>read : <span class="type-var">'var</span> <span>&#45;&gt;</span> (<span class="type-var">'value</span>, <span class="type-var">'field</span>) <a href="../../../../Typ_monads/Read/index.html#type-t">Typ_monads.Read.t</a>;</code></td></tr><tr id="type-typ.alloc" class="anchored"><td class="def field"><a href="#type-typ.alloc" class="anchor"></a><code>alloc : (<span class="type-var">'var</span>, <span class="type-var">'field</span>) <a href="../../../../Typ_monads/Alloc/index.html#type-t">Typ_monads.Alloc.t</a>;</code></td></tr><tr id="type-typ.check" class="anchored"><td class="def field"><a href="#type-typ.check" class="anchor"></a><code>check : <span class="type-var">'var</span> <span>&#45;&gt;</span> <span class="type-var">'checked</span>;</code></td></tr></table><code>}</code></dt><dd><p>The type <code>('var, 'value, 'field, 'checked) t</code> describes a mapping from OCaml types to the variables and constraints they represent:</p><ul><li><code>'value</code> is the OCaml type</li><li><code>'field</code> is the type of the field elements</li><li><code>'var</code> is some other type that contains some R1CS variables</li><li><code>'checked</code> is the type of checked computation that verifies the stored contents as R1CS variables.</li></ul><p>For convenience and readability, it is usually best to have the <code>'var</code> type mirror the <code>'value</code> type in structure, for example:</p><pre><code class="ml">type t = {b1 : bool; b2 : bool} (* 'value *)

let or (x : t) = x.b1 || x.b2

module Checked = struct
  type t = {b1 : Snark.Boolean.var; b2 : Snark.Boolean.var} (* 'var *)

  let or (x : t) = Snark.Boolean.(x.b1 || x.b2)
end</code></pre></dd></dl></details></div></div></div></div></body></html>