<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Internal_Basic (snarky.Snarky_backendless.Merkle_tree.Run.Make.Impl.Internal_Basic)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.4"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../../../index.html">snarky</a> &#x00BB; <a href="../../../../../index.html">Snarky_backendless</a> &#x00BB; <a href="../../../../index.html">Merkle_tree</a> &#x00BB; <a href="../../../index.html">Run</a> &#x00BB; <a href="../../index.html">Make</a> &#x00BB; <a href="../index.html">Impl</a> &#x00BB; Internal_Basic</nav><header class="odoc-preamble"><h1>Module <code><span>Impl.Internal_Basic</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-field"><a href="#type-field" class="anchor"></a><code><span><span class="keyword">type</span> field</span><span> = <a href="../index.html#type-field">field</a></span></code></div><div class="spec-doc"><p>The finite field over which the R1CS operates.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-field_var"><a href="#type-field_var" class="anchor"></a><code><span><span class="keyword">type</span> field_var</span><span> = <a href="../index.html#type-field_var">field_var</a></span></code></div><div class="spec-doc"><p>The variable type over which the R1CS operates.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-R1CS_constraint_system"><a href="#module-R1CS_constraint_system" class="anchor"></a><code><span><span class="keyword">module</span> <a href="R1CS_constraint_system/index.html">R1CS_constraint_system</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The rank-1 constraint system used by this instance. See <a href="../../../../../Backend_intf/module-type-S/R1CS_constraint_system/index.html"><code>Backend_intf.S.R1CS_constraint_system</code></a>.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Bigint"><a href="#module-Bigint" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Bigint/index.html">Bigint</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Constraint"><a href="#module-Constraint" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Constraint/index.html">Constraint</a></span><span> : 
  <a href="../../../../../Snark_intf/module-type-Constraint_intf/index.html">Snark_intf.Constraint_intf</a>
    <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../../../Snark_intf/module-type-Constraint_intf/index.html#type-field">field</a> := <a href="#type-field">field</a></span>
     <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="../../../../../Snark_intf/module-type-Constraint_intf/index.html#type-field_var">field_var</a> := <a href="#type-field_var">field_var</a></span>
    <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../../../Snark_intf/module-type-Constraint_intf/index.html#type-t">t</a> = <a href="../Constraint/index.html#type-t">Constraint.t</a></span></span></code></div><div class="spec-doc"><p>Rank-1 constraints over <code>Var.t</code>s.</p></div></div><p>The data specification for checked computations.</p><div class="odoc-spec"><div class="spec module anchored" id="module-Typ"><a href="#module-Typ" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Typ/index.html">Typ</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Mappings from OCaml types to R1CS variables and constraints.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Boolean"><a href="#module-Boolean" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Boolean/index.html">Boolean</a></span><span> : 
  <a href="../../../../../Snark_intf/module-type-Boolean_intf/index.html">Snark_intf.Boolean_intf</a>
    <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../../../Snark_intf/module-type-Boolean_intf/index.html#type-var">var</a> = <span><a href="Field/Var/index.html#type-t">Field.Var.t</a> <a href="../../../../../Boolean/index.html#type-t">Boolean.t</a></span></span>
     <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="../../../../../Snark_intf/module-type-Boolean_intf/index.html#type-field_var">field_var</a> := <a href="#type-field_var">field_var</a></span>
     <span class="keyword">and</span> <span><span class="keyword">type</span> <span>'a <a href="../../../../../Snark_intf/module-type-Boolean_intf/index.html#type-checked">checked</a></span> := <span><span class="type-var">'a</span> <a href="Checked/index.html#type-t">Checked.t</a></span></span>
     <span class="keyword">and</span> <span><span class="keyword">type</span> <span>('var, 'value) <a href="../../../../../Snark_intf/module-type-Boolean_intf/index.html#type-typ">typ</a></span> := <span><span>(<span class="type-var">'var</span>, <span class="type-var">'value</span>)</span> <a href="Typ/index.html#type-t">Typ.t</a></span></span></span></code></div><div class="spec-doc"><p>Representation of booleans within a field.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Checked"><a href="#module-Checked" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Checked/index.html">Checked</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Checked computations.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Field"><a href="#module-Field" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Field/index.html">Field</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-As_prover"><a href="#module-As_prover" class="anchor"></a><code><span><span class="keyword">module</span> <a href="As_prover/index.html">As_prover</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Code that can be run by the prover only, using 'superpowers' like looking at the contents of R1CS variables and creating new variables from other OCaml values.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Proof_inputs"><a href="#module-Proof_inputs" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Proof_inputs/index.html">Proof_inputs</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The complete set of inputs needed to generate a zero-knowledge proof.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Let_syntax"><a href="#module-Let_syntax" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Let_syntax/index.html">Let_syntax</a></span><span> : 
  <a href="../../../../../../Snarky_monad_lib/Monad_let/module-type-Syntax2/index.html">Snarky_monad_lib.Monad_let.Syntax2</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <span>('a, 's) <a href="../../../../../../Snarky_monad_lib/Monad_let/module-type-Syntax2/index.html#type-t">t</a></span> := <span><span class="type-var">'a</span> <a href="Checked/index.html#type-t">Checked.t</a></span></span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Bitstring_checked"><a href="#module-Bitstring_checked" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Bitstring_checked/index.html">Bitstring_checked</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Utility functions for dealing with lists of bits in the R1CS.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Handle"><a href="#module-Handle" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Handle/index.html">Handle</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Representation of an R1CS value and an OCaml value (if running as the prover) together.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Runner"><a href="#module-Runner" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Runner/index.html">Runner</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Utility functions for calling single checked computations.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-response"><a href="#type-response" class="anchor"></a><code><span><span class="keyword">type</span> response</span><span> = <a href="../../../../../Request/index.html#type-response">Request.response</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unhandled"><a href="#val-unhandled" class="anchor"></a><code><span><span class="keyword">val</span> unhandled : <a href="#type-response">response</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-request"><a href="#type-request" class="anchor"></a><code><span><span class="keyword">type</span> request</span><span> = <a href="../../../../../Request/index.html#type-request">Request.request</a></span><span> = </span></code><ol><li id="type-request.With" class="def variant constructor anchored"><a href="#type-request.With" class="anchor"></a><code><span>| </span><span><span class="constructor">With</span> : </span><span>{</span></code><ol><li id="type-request.request" class="def record field anchored"><a href="#type-request.request" class="anchor"></a><code><span>request : <span><span class="type-var">'a</span> <a href="../../../../../Request/index.html#type-t">Request.t</a></span>;</span></code></li><li id="type-request.respond" class="def record field anchored"><a href="#type-request.respond" class="anchor"></a><code><span>respond : <span><span><span class="type-var">'a</span> <a href="../../../../../Request/Response/index.html#type-t">Request.Response.t</a></span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-response">response</a>;</span></code></li></ol><code><span>}</span><span> <span class="arrow">&#45;&gt;</span> <a href="#type-request">request</a></span></code></li></ol></div><div class="spec-doc"><p>The argument type for request handlers.</p><pre class="language-ocaml"><code>type _ Request.t += My_request : 'a list -&gt; 'a Request.t

let handled (c : ('a) Checked.t) : ('a) Checked.t =
  handle (fun (With {request; respond}) -&gt;
    match request with
    | My_request l -&gt;
      let x = (* Do something with l to create a single value. *) in
      respond (Provide x)
    | _ -&gt; unhandled )</code></pre></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Handler"><a href="#module-Handler" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Handler/index.html">Handler</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The type of handlers.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-assert_"><a href="#val-assert_" class="anchor"></a><code><span><span class="keyword">val</span> assert_ : <span><a href="Constraint/index.html#type-t">Constraint.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="Checked/index.html#type-t">Checked.t</a></span></span></code></div><div class="spec-doc"><p>Add a constraint to the constraint system.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-assert_all"><a href="#val-assert_all" class="anchor"></a><code><span><span class="keyword">val</span> assert_all : <span><span><a href="Constraint/index.html#type-t">Constraint.t</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="Checked/index.html#type-t">Checked.t</a></span></span></code></div><div class="spec-doc"><p>Add all of the constraints in the list to the constraint system.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-assert_r1cs"><a href="#val-assert_r1cs" class="anchor"></a><code><span><span class="keyword">val</span> assert_r1cs : <span><a href="Field/Var/index.html#type-t">Field.Var.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Field/Var/index.html#type-t">Field.Var.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Field/Var/index.html#type-t">Field.Var.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="Checked/index.html#type-t">Checked.t</a></span></span></code></div><div class="spec-doc"><p>Add a rank-1 constraint to the constraint system.</p><p>See <a href="Constraint/index.html#val-r1cs"><code>Constraint.r1cs</code></a> for more information on rank-1 constraints.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-assert_square"><a href="#val-assert_square" class="anchor"></a><code><span><span class="keyword">val</span> assert_square : <span><a href="Field/Var/index.html#type-t">Field.Var.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="Field/Var/index.html#type-t">Field.Var.t</a> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="Checked/index.html#type-t">Checked.t</a></span></span></code></div><div class="spec-doc"><p>Add a 'square' constraint to the constraint system.</p><p>See <a href="Constraint/index.html#val-square"><code>Constraint.square</code></a> for more information.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-as_prover"><a href="#val-as_prover" class="anchor"></a><code><span><span class="keyword">val</span> as_prover : <span><span>unit <a href="As_prover/index.html#type-t">As_prover.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="Checked/index.html#type-t">Checked.t</a></span></span></code></div><div class="spec-doc"><p>Run an <a href="As_prover/index.html"><code>As_prover</code></a> block.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mk_lazy"><a href="#val-mk_lazy" class="anchor"></a><code><span><span class="keyword">val</span> mk_lazy : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Checked/index.html#type-t">Checked.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Core_kernel</span>.Lazy.t</span> <a href="Checked/index.html#type-t">Checked.t</a></span></span></code></div><div class="spec-doc"><p>Lazily evaluate a checked computation.</p><p>Any constraints within the checked computation are not added to the constraint system unless the lazy value is forced.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-next_auxiliary"><a href="#val-next_auxiliary" class="anchor"></a><code><span><span class="keyword">val</span> next_auxiliary : <span>unit <span class="arrow">&#45;&gt;</span></span> <span>int <a href="Checked/index.html#type-t">Checked.t</a></span></span></code></div><div class="spec-doc"><p>Internal: read the value of the next unused auxiliary input index.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-request_witness"><a href="#val-request_witness" class="anchor"></a><code><span><span class="keyword">val</span> request_witness : 
  <span><span><span>(<span class="type-var">'var</span>, <span class="type-var">'value</span>)</span> <a href="Typ/index.html#type-t">Typ.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span class="type-var">'value</span> <a href="../../../../../Request/index.html#type-t">Request.t</a></span> <a href="As_prover/index.html#type-t">As_prover.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'var</span> <a href="Checked/index.html#type-t">Checked.t</a></span></span></code></div><div class="spec-doc"><p><code>request_witness typ create_request</code> runs the <code>create_request</code> <a href="As_prover/index.html#type-t"><code>As_prover.t</code></a> block to generate a <a href="../../../../../Request/index.html#type-t"><code>Request.t</code></a>.</p><p>This allows us to introduce values into the R1CS without passing them as public inputs.</p><p>If no handler for the request is attached by <a href="#val-handle"><code>handle</code></a>, this raises a <code>Failure</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-perform"><a href="#val-perform" class="anchor"></a><code><span><span class="keyword">val</span> perform : <span><span><span>unit <a href="../../../../../Request/index.html#type-t">Request.t</a></span> <a href="As_prover/index.html#type-t">As_prover.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="Checked/index.html#type-t">Checked.t</a></span></span></code></div><div class="spec-doc"><p>Like <a href="#val-request_witness"><code>request_witness</code></a>, but the request doesn't return any usable value.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-request"><a href="#val-request" class="anchor"></a><code><span><span class="keyword">val</span> request : 
  <span><span class="optlabel">?such_that</span>:<span>(<span><span class="type-var">'var</span> <span class="arrow">&#45;&gt;</span></span> <span>unit <a href="Checked/index.html#type-t">Checked.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'var</span>, <span class="type-var">'value</span>)</span> <a href="Typ/index.html#type-t">Typ.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'value</span> <a href="../../../../../Request/index.html#type-t">Request.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'var</span> <a href="Checked/index.html#type-t">Checked.t</a></span></span></code></div><div class="spec-doc"><p>Like <a href="#val-request_witness"><code>request_witness</code></a>, but generates the request without using any <a href="As_prover/index.html"><code>As_prover</code></a> 'superpowers'.</p><p>The argument <code>such_that</code> allows adding extra constraints on the returned value.</p><p>(* TODO: Come up with a better name for this in relation to the above *)</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exists"><a href="#val-exists" class="anchor"></a><code><span><span class="keyword">val</span> exists : 
  <span><span class="optlabel">?request</span>:<span><span><span class="type-var">'value</span> <a href="../../../../../Request/index.html#type-t">Request.t</a></span> <a href="As_prover/index.html#type-t">As_prover.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?compute</span>:<span><span class="type-var">'value</span> <a href="As_prover/index.html#type-t">As_prover.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'var</span>, <span class="type-var">'value</span>)</span> <a href="Typ/index.html#type-t">Typ.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'var</span> <a href="Checked/index.html#type-t">Checked.t</a></span></span></code></div><div class="spec-doc"><p>Introduce a value into the R1CS.</p><ul><li>The <code>request</code> argument functions like <a href="#val-request_witness"><code>request_witness</code></a>, creating a request and returning the result.</li><li>If no <code>request</code> argument is given, or if the <code>request</code> isn't handled, then <code>compute</code> is run to create a value.</li></ul><p>If <code>compute</code> is not given and <code>request</code> fails/is also not given, then this function raises a <code>Failure</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-exists_handle"><a href="#val-exists_handle" class="anchor"></a><code><span><span class="keyword">val</span> exists_handle : 
  <span><span class="optlabel">?request</span>:<span><span><span class="type-var">'value</span> <a href="../../../../../Request/index.html#type-t">Request.t</a></span> <a href="As_prover/index.html#type-t">As_prover.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?compute</span>:<span><span class="type-var">'value</span> <a href="As_prover/index.html#type-t">As_prover.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'var</span>, <span class="type-var">'value</span>)</span> <a href="Typ/index.html#type-t">Typ.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'var</span>, <span class="type-var">'value</span>)</span> <a href="Handle/index.html#type-t">Handle.t</a></span> <a href="Checked/index.html#type-t">Checked.t</a></span></span></code></div><div class="spec-doc"><p>Like <a href="#val-exists"><code>exists</code></a>, but returns a <a href="Handle/index.html#type-t"><code>Handle.t</code></a>.</p><p>This persists the OCaml value of the result, which is stored unchanged in the <a href="Handle/index.html#type-t"><code>Handle.t</code></a> and can be recalled in later <a href="As_prover/index.html"><code>As_prover</code></a> blocks using <a href="Handle/index.html#val-value"><code>Handle.value</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-handle"><a href="#val-handle" class="anchor"></a><code><span><span class="keyword">val</span> handle : <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Checked/index.html#type-t">Checked.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="Handler/index.html#type-t">Handler.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Checked/index.html#type-t">Checked.t</a></span></span></code></div><div class="spec-doc"><p>Add a request handler to the checked computation, to be used by <a href="#val-request_witness"><code>request_witness</code></a>, <a href="#val-perform"><code>perform</code></a>, <a href="#val-request"><code>request</code></a> or <a href="#val-exists"><code>exists</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-handle_as_prover"><a href="#val-handle_as_prover" class="anchor"></a><code><span><span class="keyword">val</span> handle_as_prover : 
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Checked/index.html#type-t">Checked.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="Handler/index.html#type-t">Handler.t</a> <a href="As_prover/index.html#type-t">As_prover.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'a</span> <a href="Checked/index.html#type-t">Checked.t</a></span></span></code></div><div class="spec-doc"><p>Generate a handler using the <a href="As_prover/index.html"><code>As_prover</code></a> 'superpowers', and use it for <a href="#val-request_witness"><code>request_witness</code></a>, <a href="#val-perform"><code>perform</code></a>, <a href="#val-request"><code>request</code></a> or <a href="#val-exists"><code>exists</code></a> calls in the wrapped checked computation.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-if_"><a href="#val-if_" class="anchor"></a><code><span><span class="keyword">val</span> if_ : 
  <span><a href="Boolean/index.html#type-var">Boolean.var</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">typ</span>:<span><span>(<span class="type-var">'var</span>, <span class="type-var">_</span>)</span> <a href="Typ/index.html#type-t">Typ.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">then_</span>:<span class="type-var">'var</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">else_</span>:<span class="type-var">'var</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'var</span> <a href="Checked/index.html#type-t">Checked.t</a></span></span></code></div><div class="spec-doc"><p><code>if_ b ~then_ ~else_</code> returns <code>then_</code> if <code>b</code> is true, or <code>else_</code> otherwise.</p><p>WARNING: The <code>Typ.t</code>'s <code>read</code> field must be able to construct values from a series of field zeros.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_label"><a href="#val-with_label" class="anchor"></a><code><span><span class="keyword">val</span> with_label : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Checked/index.html#type-t">Checked.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Checked/index.html#type-t">Checked.t</a></span></span></code></div><div class="spec-doc"><p>Add a label to all of the constraints added in the checked computation. If a constraint is checked and isn't satisfied, this label will be shown in the error message.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-constraint_system"><a href="#val-constraint_system" class="anchor"></a><code><span><span class="keyword">val</span> constraint_system : 
  <span><span class="label">input_typ</span>:<span><span>(<span class="type-var">'input_var</span>, <span class="type-var">'input_value</span>)</span> <a href="Typ/index.html#type-t">Typ.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">return_typ</span>:<span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="Typ/index.html#type-t">Typ.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'input_var</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Checked/index.html#type-t">Checked.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="R1CS_constraint_system/index.html#type-t">R1CS_constraint_system.t</a></span></code></div><div class="spec-doc"><p>Generate the R1CS for the checked computation.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-conv"><a href="#val-conv" class="anchor"></a><code><span><span class="keyword">val</span> conv : 
  <span><span>(<span><span class="type-var">'r_var</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'r_value</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'input_var</span>, <span class="type-var">'input_value</span>)</span> <a href="Typ/index.html#type-t">Typ.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">_</span>, <span class="type-var">_</span>)</span> <a href="Typ/index.html#type-t">Typ.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'input_var</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'r_var</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'input_value</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'r_value</span></span></code></div><div class="spec-doc"><p>Internal: supplies arguments to a checked computation by storing them according to the <code>Data_spec.t</code> and passing the R1CS versions.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-generate_public_input"><a href="#val-generate_public_input" class="anchor"></a><code><span><span class="keyword">val</span> generate_public_input : 
  <span><span><span>(<span class="type-var">'input_var</span>, <span class="type-var">'input_value</span>)</span> <a href="Typ/index.html#type-t">Typ.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'input_value</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="Field/Vector/index.html#type-t">Field.Vector.t</a></span></code></div><div class="spec-doc"><p>Generate the public input vector for a given statement.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-generate_witness"><a href="#val-generate_witness" class="anchor"></a><code><span><span class="keyword">val</span> generate_witness : 
  <span><span class="label">input_typ</span>:<span><span>(<span class="type-var">'input_var</span>, <span class="type-var">'input_value</span>)</span> <a href="Typ/index.html#type-t">Typ.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">return_typ</span>:<span><span>(<span class="type-var">'r_var</span>, <span class="type-var">_</span>)</span> <a href="Typ/index.html#type-t">Typ.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'input_var</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'r_var</span> <a href="Checked/index.html#type-t">Checked.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'input_value</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="Proof_inputs/index.html#type-t">Proof_inputs.t</a></span></code></div><div class="spec-doc"><p>Generate a witness (auxiliary input) for the given public input.</p><p>Returns a record of field vectors <code>{public_inputs; auxiliary_inputs}</code>, corresponding to the given public input and generated auxiliary input.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-generate_witness_conv"><a href="#val-generate_witness_conv" class="anchor"></a><code><span><span class="keyword">val</span> generate_witness_conv : 
  <span><span class="label">f</span>:<span>(<span><a href="Proof_inputs/index.html#type-t">Proof_inputs.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'r_value</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'out</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">input_typ</span>:<span><span>(<span class="type-var">'input_var</span>, <span class="type-var">'input_value</span>)</span> <a href="Typ/index.html#type-t">Typ.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">return_typ</span>:<span><span>(<span class="type-var">'r_var</span>, <span class="type-var">'r_value</span>)</span> <a href="Typ/index.html#type-t">Typ.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'input_var</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'r_var</span> <a href="Checked/index.html#type-t">Checked.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'input_value</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'out</span></span></code></div><div class="spec-doc"><p>Generate a witness (auxiliary input) for the given public input and pass the result to a function.</p><p>Returns the result of applying <code>f</code> to the record of field vectors <code>{public_inputs; auxiliary_inputs}</code>, corresponding to the given public input and generated auxiliary input.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run_unchecked"><a href="#val-run_unchecked" class="anchor"></a><code><span><span class="keyword">val</span> run_unchecked : <span><span><span class="type-var">'a</span> <a href="Checked/index.html#type-t">Checked.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Run a checked computation as the prover, without checking the constraints.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run_and_check"><a href="#val-run_and_check" class="anchor"></a><code><span><span class="keyword">val</span> run_and_check : <span><span><span><span class="type-var">'a</span> <a href="As_prover/index.html#type-t">As_prover.t</a></span> <a href="Checked/index.html#type-t">Checked.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Core_kernel</span>.Or_error.t</span></span></code></div><div class="spec-doc"><p>Run a checked computation as the prover, checking the constraints.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-run_and_check_exn"><a href="#val-run_and_check_exn" class="anchor"></a><code><span><span class="keyword">val</span> run_and_check_exn : <span><span><span><span class="type-var">'a</span> <a href="As_prover/index.html#type-t">As_prover.t</a></span> <a href="Checked/index.html#type-t">Checked.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Run a checked computation as the prover, checking the constraints. Will raise an exception on failure.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check"><a href="#val-check" class="anchor"></a><code><span><span class="keyword">val</span> check : <span><span><span class="type-var">'a</span> <a href="Checked/index.html#type-t">Checked.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>unit <span class="xref-unresolved">Core_kernel</span>.Or_error.t</span></span></code></div><div class="spec-doc"><p>Run a checked computation as the prover, returning <code>true</code> if the constraints are all satisfied, or <code>false</code> otherwise.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-check_exn"><a href="#val-check_exn" class="anchor"></a><code><span><span class="keyword">val</span> check_exn : <span><span><span class="type-var">'a</span> <a href="Checked/index.html#type-t">Checked.t</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Run a checked computation as the prover, raising an exception if any constraints are not satisfied.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-generate_auxiliary_input"><a href="#val-generate_auxiliary_input" class="anchor"></a><code><span><span class="keyword">val</span> generate_auxiliary_input : 
  <span><span class="label">input_typ</span>:<span><span>(<span class="type-var">'input_var</span>, <span class="type-var">'input_value</span>)</span> <a href="Typ/index.html#type-t">Typ.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">return_typ</span>:<span><span>(<span class="type-var">'a</span>, <span class="type-var">_</span>)</span> <a href="Typ/index.html#type-t">Typ.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="type-var">'input_var</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <a href="Checked/index.html#type-t">Checked.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'input_value</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Run the checked computation and generate the auxiliary input, but don't generate a proof.</p><p>Returns <code>unit</code>; this is for testing only.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-constraint_count"><a href="#val-constraint_count" class="anchor"></a><code><span><span class="keyword">val</span> constraint_count : 
  <span><span class="optlabel">?weight</span>:<span>(<span><a href="Constraint/index.html#type-t">Constraint.t</a> <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?log</span>:<span>(<span><span class="optlabel">?start</span>:bool <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">_</span> <a href="Checked/index.html#type-t">Checked.t</a></span>)</span> <span class="arrow">&#45;&gt;</span></span>
  int</span></code></div><div class="spec-doc"><p>Returns the number of constraints in the constraint system.</p><p>The optional <code>log</code> argument is called at the start and end of each <code>with_label</code>, with the arguments <code>log ?start label count</code>, where:</p><ul><li><code>start</code> is <code>Some true</code> if it the start of the <code>with_label</code>, or <code>None</code> otherwise</li><li><code>label</code> is the label added by <code>with_label</code></li><li><code>count</code> is the number of constraints at that point.</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-constant"><a href="#val-constant" class="anchor"></a><code><span><span class="keyword">val</span> constant : <span><span><span>(<span class="type-var">'var</span>, <span class="type-var">'value</span>)</span> <a href="Typ/index.html#type-t">Typ.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'value</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'var</span></span></code></div><div class="spec-doc"><p>Return a constraint system constant representing the given value.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Test"><a href="#module-Test" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Test/index.html">Test</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-set_constraint_logger"><a href="#val-set_constraint_logger" class="anchor"></a><code><span><span class="keyword">val</span> set_constraint_logger : 
  <span><span>(<span><span class="optlabel">?at_label_boundary</span>:<span>(<span>[ `Start <span>| `End</span> ]</span> * string)</span> <span class="arrow">&#45;&gt;</span></span>
    <span><span><a href="Constraint/index.html#type-t">Constraint.t</a> option</span> <span class="arrow">&#45;&gt;</span></span>
    unit)</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-clear_constraint_logger"><a href="#val-clear_constraint_logger" class="anchor"></a><code><span><span class="keyword">val</span> clear_constraint_logger : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div></div></body></html>
