<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Integer (snarky_integer.Snarky_integer.Integer)</title><link rel="stylesheet" href="../../../../../snarky/css/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../snarky/js/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">snarky_integer</a> &#x00BB; <a href="../index.html">Snarky_integer</a> &#x00BB; Integer</nav><header class="odoc-preamble"><h1>Module <code><span>Snarky_integer.Integer</span></code></h1><p>Positive integers as field elements.</p><p>These operations assert that the value of the field element does not exceed the largest element in the field -- ie. that the operations do not overflow.</p><p>Whenever possible, the bit representation is cached to avoid recomputing it.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module" id="module-Interval" class="anchored"><a href="#module-Interval" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Interval/index.html">Interval</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'f t</span></span><span> = </span><span>{</span></code><table><tr id="type-t.value" class="anchored"><td class="def record field"><a href="#type-t.value" class="anchor"></a><code><span>value : <span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Cvar/index.html#type-t">Snarky_backendless.Cvar.t</a></span>;</span></code></td></tr><tr id="type-t.interval" class="anchored"><td class="def record field"><a href="#type-t.interval" class="anchor"></a><code><span>interval : <a href="Interval/index.html#type-t">Interval.t</a>;</span></code></td></tr><tr id="type-t.bits" class="anchored"><td class="def record field"><a href="#type-t.bits" class="anchor"></a><code><span><span class="keyword">mutable</span> bits : <span><span><span><span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Cvar/index.html#type-t">Snarky_backendless.Cvar.t</a></span> <a href="../../../snarky/Snarky_backendless/Boolean/index.html#type-t">Snarky_backendless.Boolean.t</a></span> list</span>
                 option</span>;</span></code></td></tr></table><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-constant" class="anchored"><a href="#val-constant" class="anchor"></a><code><span><span class="keyword">val</span> constant : 
  <span>?length:int <span class="arrow">&#45;&gt;</span></span>
  <span>m:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Snark/index.html#type-m">Snarky_backendless.Snark.m</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Bigint</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'f</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Create an value representing the given constant value.</p><p>The bit representation of the constant is cached, and is padded to <code>length</code> when given.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-shift_left" class="anchored"><a href="#val-shift_left" class="anchor"></a><code><span><span class="keyword">val</span> shift_left : <span>m:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Snark/index.html#type-m">Snarky_backendless.Snark.m</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>shift_left ~m x k</code> is equivalent to multiplying <code>x</code> by <code>2^k</code>.</p><p>The result has a cached bit representation whenever the given <code>x</code> had a cached bit representation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-of_bits" class="anchored"><a href="#val-of_bits" class="anchor"></a><code><span><span class="keyword">val</span> of_bits : 
  <span>m:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Snark/index.html#type-m">Snarky_backendless.Snark.m</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Cvar/index.html#type-t">Snarky_backendless.Cvar.t</a></span> <a href="../../../snarky/Snarky_backendless/Boolean/index.html#type-t">Snarky_backendless.Boolean.t</a></span>
    <a href="../../../bitstring_lib/Bitstring_lib/Bitstring/Lsb_first/index.html#type-t">Bitstring_lib.Bitstring.Lsb_first.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'f</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p>Create a value from the given bit string.</p><p>The given bit representation is cached.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_bits" class="anchored"><a href="#val-to_bits" class="anchor"></a><code><span><span class="keyword">val</span> to_bits : 
  <span>?length:int <span class="arrow">&#45;&gt;</span></span>
  <span>m:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Snark/index.html#type-m">Snarky_backendless.Snark.m</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Cvar/index.html#type-t">Snarky_backendless.Cvar.t</a></span> <a href="../../../snarky/Snarky_backendless/Boolean/index.html#type-t">Snarky_backendless.Boolean.t</a></span>
    <a href="../../../bitstring_lib/Bitstring_lib/Bitstring/Lsb_first/index.html#type-t">Bitstring_lib.Bitstring.Lsb_first.t</a></span></span></code></div><div class="spec-doc"><p>Compute the bit representation of the given integer.</p><p>If the bit representation has already been cached, it is returned and no additional constraints are added. If the representation is computed, the value is updated to include the cache.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_bits_exn" class="anchored"><a href="#val-to_bits_exn" class="anchor"></a><code><span><span class="keyword">val</span> to_bits_exn : 
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Cvar/index.html#type-t">Snarky_backendless.Cvar.t</a></span> <a href="../../../snarky/Snarky_backendless/Boolean/index.html#type-t">Snarky_backendless.Boolean.t</a></span>
    <a href="../../../bitstring_lib/Bitstring_lib/Bitstring/Lsb_first/index.html#type-t">Bitstring_lib.Bitstring.Lsb_first.t</a></span></span></code></div><div class="spec-doc"><p>Return the cached bit representation, or raise an exception if the bit representation has not been cached.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_bits_opt" class="anchored"><a href="#val-to_bits_opt" class="anchor"></a><code><span><span class="keyword">val</span> to_bits_opt : 
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Cvar/index.html#type-t">Snarky_backendless.Cvar.t</a></span> <a href="../../../snarky/Snarky_backendless/Boolean/index.html#type-t">Snarky_backendless.Boolean.t</a></span>
    <a href="../../../bitstring_lib/Bitstring_lib/Bitstring/Lsb_first/index.html#type-t">Bitstring_lib.Bitstring.Lsb_first.t</a></span>
    option</span></span></code></div><div class="spec-doc"><p>Returns <code>Some bs</code> for <code>bs</code> the cached bit representation, or <code>None</code> if the bit representation has not been cached.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-div_mod" class="anchored"><a href="#val-div_mod" class="anchor"></a><code><span><span class="keyword">val</span> div_mod : <span>m:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Snark/index.html#type-m">Snarky_backendless.Snark.m</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="#type-t">t</a></span> * <span><span class="type-var">'f</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>div_mod ~m a b = (q, r)</code> such that <code>a = q * b + r</code> and <code>r &lt; b</code>.</p><p>The bit representations of <code>q</code> and <code>r</code> are calculated and cached.</p><p>NOTE: This uses approximately <code>log2(a) + 2 * log2(b)</code> constraints.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-to_field" class="anchored"><a href="#val-to_field" class="anchor"></a><code><span><span class="keyword">val</span> to_field : <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Cvar/index.html#type-t">Snarky_backendless.Cvar.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-create" class="anchored"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : <span>value:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Cvar/index.html#type-t">Snarky_backendless.Cvar.t</a></span> <span class="arrow">&#45;&gt;</span></span> <span>upper_bound:<span class="xref-unresolved">Bigint</span>.t <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-min" class="anchored"><a href="#val-min" class="anchor"></a><code><span><span class="keyword">val</span> min : <span>m:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Snark/index.html#type-m">Snarky_backendless.Snark.m</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>min ~m x y</code> returns a value equal the lesser of <code>x</code> and <code>y</code>.</p><p>The result does not carry a cached bit representation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-if_" class="anchored"><a href="#val-if_" class="anchor"></a><code><span><span class="keyword">val</span> if_ : 
  <span>m:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Snark/index.html#type-m">Snarky_backendless.Snark.m</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Cvar/index.html#type-t">Snarky_backendless.Cvar.t</a></span> <a href="../../../snarky/Snarky_backendless/Boolean/index.html#type-t">Snarky_backendless.Boolean.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>then_:<span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>else_:<span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'f</span> <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-succ" class="anchored"><a href="#val-succ" class="anchor"></a><code><span><span class="keyword">val</span> succ : <span>m:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Snark/index.html#type-m">Snarky_backendless.Snark.m</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>succ ~m x</code> computes the successor <code>x+1</code> of <code>x</code>.</p><p>The result does not carry a cached bit representation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-succ_if" class="anchored"><a href="#val-succ_if" class="anchor"></a><code><span><span class="keyword">val</span> succ_if : 
  <span>m:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Snark/index.html#type-m">Snarky_backendless.Snark.m</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Cvar/index.html#type-t">Snarky_backendless.Cvar.t</a></span> <a href="../../../snarky/Snarky_backendless/Boolean/index.html#type-t">Snarky_backendless.Boolean.t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'f</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>succ_if ~m x b</code> computes the integer <code>x+1</code> if <code>b</code> is <code>true</code>, or <code>x</code> otherwise.</p><p>The result does not carry a cached bit representation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-equal" class="anchored"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : 
  <span>m:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Snark/index.html#type-m">Snarky_backendless.Snark.m</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Cvar/index.html#type-t">Snarky_backendless.Cvar.t</a></span> <a href="../../../snarky/Snarky_backendless/Boolean/index.html#type-t">Snarky_backendless.Boolean.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-lt" class="anchored"><a href="#val-lt" class="anchor"></a><code><span><span class="keyword">val</span> lt : 
  <span>m:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Snark/index.html#type-m">Snarky_backendless.Snark.m</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Cvar/index.html#type-t">Snarky_backendless.Cvar.t</a></span> <a href="../../../snarky/Snarky_backendless/Boolean/index.html#type-t">Snarky_backendless.Boolean.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-lte" class="anchored"><a href="#val-lte" class="anchor"></a><code><span><span class="keyword">val</span> lte : 
  <span>m:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Snark/index.html#type-m">Snarky_backendless.Snark.m</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Cvar/index.html#type-t">Snarky_backendless.Cvar.t</a></span> <a href="../../../snarky/Snarky_backendless/Boolean/index.html#type-t">Snarky_backendless.Boolean.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-gt" class="anchored"><a href="#val-gt" class="anchor"></a><code><span><span class="keyword">val</span> gt : 
  <span>m:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Snark/index.html#type-m">Snarky_backendless.Snark.m</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Cvar/index.html#type-t">Snarky_backendless.Cvar.t</a></span> <a href="../../../snarky/Snarky_backendless/Boolean/index.html#type-t">Snarky_backendless.Boolean.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-gte" class="anchored"><a href="#val-gte" class="anchor"></a><code><span><span class="keyword">val</span> gte : 
  <span>m:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Snark/index.html#type-m">Snarky_backendless.Snark.m</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Cvar/index.html#type-t">Snarky_backendless.Cvar.t</a></span> <a href="../../../snarky/Snarky_backendless/Boolean/index.html#type-t">Snarky_backendless.Boolean.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-add" class="anchored"><a href="#val-add" class="anchor"></a><code><span><span class="keyword">val</span> add : <span>m:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Snark/index.html#type-m">Snarky_backendless.Snark.m</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>add ~m x y</code> computes <code>x + y</code>.</p><p>The result does not carry a cached bit representation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-mul" class="anchored"><a href="#val-mul" class="anchor"></a><code><span><span class="keyword">val</span> mul : <span>m:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Snark/index.html#type-m">Snarky_backendless.Snark.m</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'f</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>mul ~m x y</code> computes <code>x * y</code>.</p><p>The result does not carry a cached bit representation.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-subtract_unpacking" class="anchored"><a href="#val-subtract_unpacking" class="anchor"></a><code><span><span class="keyword">val</span> subtract_unpacking : 
  <span>m:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Snark/index.html#type-m">Snarky_backendless.Snark.m</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="type-var">'f</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>subtract_unpacking ~m x y</code> computes <code>x - y</code>.</p><p>The bit representation is calculated to ensure that <code>0 &lt;= x - y</code>, and is cached in the result.</p><p>NOTE: This uses approximately <code>log2(x)</code> constraints.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-subtract_unpacking_or_zero" class="anchored"><a href="#val-subtract_unpacking_or_zero" class="anchor"></a><code><span><span class="keyword">val</span> subtract_unpacking_or_zero : 
  <span>m:<span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Snark/index.html#type-m">Snarky_backendless.Snark.m</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'f</span> <a href="#type-t">t</a></span> <span class="arrow">&#45;&gt;</span></span>
  <span>[ <span>`Underflow of <span><span><span class="type-var">'f</span> <a href="../../../snarky/Snarky_backendless/Cvar/index.html#type-t">Snarky_backendless.Cvar.t</a></span> <a href="../../../snarky/Snarky_backendless/Boolean/index.html#type-t">Snarky_backendless.Boolean.t</a></span></span> ]</span>
  * <span><span class="type-var">'f</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>subtract_unpacking_or_zero ~m x y</code> computes <code>x - y</code>.</p><ul><li>If the argument to <code>`Underflow</code> is true, <code>x &lt; y</code> and the returned integer value is pinned to <code>zero</code>.</li><li>If the argument to <code>`Underflow</code> is false, <code>x &gt;= y</code> and the returned integer value is equal to <code>x - y</code>.</li></ul><p>The bit representation is calculated to check for underflow.</p><p>NOTE: This uses approximately <code>log2(x)</code> constraints.</p></div></div></div></body></html>